@if (lifetimeResultsQueryResult().data; as data) {
  <!-- Lifetime Rankings Table -->
  <p-table
    [value]="data"
    [defaultSortOrder]="-1"
    sortField="lifetime_score"
    [sortOrder]="-1"
    [scrollable]="true"
  >
    <ng-template pTemplate="header">
      <tr>
        <th pFrozenColumn>Player</th>
        <th pSortableColumn="lifetime_score">
          Lifetime Pts. <p-sortIcon field="lifetime_score" />
        </th>
        <th pSortableColumn="average_score">
          Average Pts. <p-sortIcon field="average_score" />
        </th>
        <th pSortableColumn="num_sessions">
          Sessions <p-sortIcon field="num_sessions" />
        </th>
      </tr>
    </ng-template>
    <ng-template pTemplate="body" let-row>
      <tr
        [ngClass]="{
          'font-semibold bg-yellow-100': row.user_id === userId()
        }"
      >
        <td pFrozenColumn>
          <div class="flex align-items-center gap-2 -py-2">
            <img
              [ngSrc]="row.avatar_url"
              alt=""
              width="32"
              height="32"
              class="border-circle bg-gray-200"
            />
            {{ row.display_name }}
          </div>
        </td>
        <td class="text-right">
          {{ row.lifetime_score | number }}
        </td>
        <td class="text-right">
          {{ row.average_score | number }}
        </td>
        <td class="text-right">
          {{ row.num_sessions | number }}
        </td>
      </tr>
    </ng-template>
  </p-table>
} @else {
  <p class="text-red-700">Error loading data</p>
}
