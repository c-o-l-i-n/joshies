<!-- Header -->
<joshies-page-header headerText="Rules">
  @if (viewModel(); as vm) {
    @if (vm.userIsGameMaster) {
      @if (vm.editMode) {
        <!-- Cancel Button -->
        <p-button
          class="ml-auto"
          label="Cancel"
          [text]="true"
          severity="danger"
          (onClick)="confirmCancel()"
        />
      } @else {
        <!-- Edit Button -->
        <i
          tabindex="0"
          class="pi pi-pencil text-700 p-2 ml-auto"
          (click)="enterEditMode()"
          (keyup.enter)="enterEditMode()"
        ></i>
      }
    }
  }
</joshies-page-header>

@if (viewModel(); as vm) {
  @if (vm.rules) {
    @if (vm.editMode) {
      <!-- Form -->
      <joshies-form [form]="vm.form" />
    } @else {
      <!-- Rules -->
      <div [innerHTML]="vm.rules" class="content"></div>
    }
  } @else if (vm.rules === null) {
    <!-- No active session -->
    <p class="mt-6 pt-6 text-center text-500 font-italic">No active session</p>
  }
} @else {
  <!-- Loading Skeleton -->
  <p-skeleton width="100%" height="25rem" />
}

<p-confirmDialog styleClass="m-3" />
