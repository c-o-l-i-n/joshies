import { inject, Injectable } from '@angular/core';
import { PostgrestSingleResponse, SupabaseClient } from '@supabase/supabase-js';
import { Database } from '../util/schema';
import { BetModel, OmitAutoGeneratedColumns } from '../util/supabase-types';
import { Table } from '../util/supabase-helpers';

@Injectable({
  providedIn: 'root',
})
export class BetService {
  private readonly supabase: SupabaseClient<Database> = inject(SupabaseClient);

  async createBet(
    bet: OmitAutoGeneratedColumns<BetModel>,
  ): Promise<PostgrestSingleResponse<null>> {
    return this.supabase.from(Table.Bet).insert(bet);
  }
}
